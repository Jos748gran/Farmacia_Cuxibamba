<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>CRUD de Medicamentos</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <script>
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById(sectionId).style.display = 'block';
        }
    </script>
</head>
<body>
    <h1>CRUD de Medicamentos</h1>
    <nav>
        <button onclick="showSection('list')">Listar Medicamentos</button>
        <button onclick="showSection('create')">Crear Medicamento</button>
    </nav>

    <!-- List View -->
    <div id="list" class="section" style="display: block;">
        <h2>Lista de Medicamentos</h2>
        <ul>
            {% for medicamento in medicamentos %}
                <li>
                    <span>{{ medicamento.nombre_medicamento }}</span>
                    <button onclick="showSection('detail-{{ medicamento.id }}')">Ver Detalles</button>
                    <button onclick="showSection('update-{{ medicamento.id }}')">Editar</button>
                    <form method="post" action="{% url 'medicamento_delete' medicamento.id %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit">Eliminar</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    </div>

    <!-- Create View -->
    <div id="create" class="section" style="display: none;">
        <h2>Crear Medicamento</h2>
        <form method="post" action="{% url 'medicamento_create' %}">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Guardar</button>
        </form>
    </div>

    <!-- Detail and Update Views -->
    {% for medicamento in medicamentos %}
        <div id="detail-{{ medicamento.id }}" class="section" style="display: none;">
            <h2>Detalle del Medicamento</h2>
            <p>Nombre: {{ medicamento.nombre_medicamento }}</p>
            <p>Descripción: {{ medicamento.descripcion }}</p>
            <p>Presentación: {{ medicamento.presentación }}</p>
<button onclick="window.location.href='{% url 'medicamento_list' %}'">Listar Medicamentos</button>        </div>

        <div id="update-{{ medicamento.id }}" class="section" style="display: none;">
            <h2>Editar Medicamento</h2>
            <form method="post" action="{% url 'medicamento_update' medicamento.id %}">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">Guardar</button>
            </form>
        </div>
    {% endfor %}
</body>
</html>